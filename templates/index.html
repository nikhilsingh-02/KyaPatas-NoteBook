{% extends "base.html" %}

{% block body %}
    {% for todo in todos %}
        <div class='todo-container'>
            <article class="media content-section">
                 <div class="media-body">
                   <h2><a class="todo-title" href="{{ url_for('get_todo', id=todo.id) }}">{{ todo.title }}</a></h2>
                   <p class="todo-content">{{ todo.description }}</p>
                   
                   <div class="d-flex align-items-center">
                        <form action="{{ url_for('toggle_status', id=todo.id) }}" method="POST" class="mr-2">
                            <button type="submit" class="btn btn-primary">Toggle Status</button>
                        </form>
                        
                        <a class="btn btn-warning mr-2" href="{{ url_for('edit_todo', id=todo.id) }}">Edit</a>

                        <form action="{{ url_for('delete_todo', id=todo.id) }}" method="POST">
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>
                   </div>
                   
                   <h3 class="mt-3">Completed: {{ todo.is_done }}</h3>
                   
                   <div class="todo-metadata d-flex justify-content-between">
                       <small class="text-muted">Created at: {{ todo.created_at.strftime('%Y-%m-%d') }}</small>
                       <small style="color:#23a96e; text-align:left;">Created by: {{ current_user.username }}</small>
                   </div>
                 </div>
            </article>
        </div>
    {% endfor %}

{% endblock %}